---
build:
  script:
    - pelican content 
  stage: build
  tags:
    - ci
    - shell
    - ssh
deploy:
  script:
    - cd output
    - rm -rf output
    - cd ..
    - git add *
    - git commit -m "Update of website"
    - git push --force https://$GITHUB_TOKEN@github.com/aldoranx/my-blog.git HEAD:master
  stage: deploy
  tags:
    - ci
    - shell
    - ssh
  when: manual
stages:
  - test_variable
  - build
  - deploy
test_variable:
  script:
    - "echo $GITHUB_USER"
  stage: test_variable
  tags:
    - ci
    - shell
    - ssh
